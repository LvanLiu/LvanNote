# :books: 整洁的代码

> 让营地比你来时更干净。——童子军军规

## 对象与数据结构

### 数据结构、对象的反对称性

> 一切都是对象只是一个传说。

过程式代码（使用数据结构的代码）便于在不改动既有数据结构的前提下添加新函数。面向对象代码便于在不改动既有的函数的前提下添加新类。

在任何一个复杂系统中，都会有需要添加新数据类型而不是新函数的时候，这时，对象和面向对象就比较适合。另一方面，也会有想要添加新函数而不是数据类型的时候，在这种情况下，过程式代码和数据结构更合适。

### 得墨忒耳律

得墨忒耳律：模块不应了解它所操作对象的内部情形。

- 火车失事
- 混杂
- 隐藏结构

## 错误处理

- 使用异常而非返回码
- 先写try-catch-finally语句
- 使用不可控异常
- 给出异常发生的环境说明
- 依调用者需要定义异常类
- 定义常规流程，使用特例模式来取代异常处理
- 别返回NULL值，使用异常或者特例对象代替
- 别传递NULL值

## 单元测试

编写单元测试，需要保证单元测试的可读性，保证以下几点：

- 每个测试一个断言
- 每个测试一个概念

单元测试需要满足**F.I.R.S.T**原则。

- **F(Fast):** 测试应该够快
- **I(Independent):** 测试应该相互独立，互不依赖
- **R(Repeatable):** 测试应当在任何环境中重复通过
- **S(Self-Validation):** 测试应该有布尔值输出，这里我理解为测试需要使用断言
- **T(Timely):** 测试应及时编写

## 类的组织

编写类应该根据以下顺序进行编写（遵循自顶向下规则）。

1. 公共静态常量
2. 私有静态变量、
3. 私有实体变量
4. 公共函数
5. 私有函数
