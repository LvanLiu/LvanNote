# :last_quarter_moon_with_face:单例模式

> :pushpin: 一思尚存，此志不懈。——胡居仁

## 什么是单例模式

一个类只允许创建一个对象（或者实例），那么这个类就是一个单例类。这种模式也叫单例模式。

## 如何实现一个单例

实现一个单例，需要关注以下几个点：

- 构造函数需要是private访问权限的，避免外部通过new创建实例。
- 考虑对象创建的线程安全问题。
- 考虑是否支持延迟加载。
- 考虑getInstance()性能是否高（是否加锁）。

## 单例模式的应用场景

- 需要频繁创建的一些类，使用单例可以降低系统的内存压力，减少GC
- 某些类创建实例时占用资源较多，或实例化耗时较长，且经常使用
- 频繁访问数据库或文件的对象

## 实现单例的模式

### 饿汉式

饿汉式的单例，是指在类加载的时候，instance静态实例就已经创建并初始化好了。所以instance实例创建的过程是线程安全的。

不过这种方式不支持延迟加载。

饿汉单例具体实现如下：

```java
public class HungrySingleton {

    private static final HungrySingleton instance = new HungrySingleton();

    private HungrySingleton() {
    }

    public static HungrySingleton getInstance() {
        return instance;
    }
}
```

因为饿汉单例是在类加载时创建，因此系统中存在大量的饿汉式单例的话，就会造成内存浪费的问题。因此，使用饿汉模式的话，需要根据实际情况来考虑。比如存在以下的情况，可以采用饿汉模式：

- 如果单例初始化耗时长，则可以将这部分耗时提前到类加载时消耗。
- 如果实例占用资源过多，根据fail-fast原则，这些实例也要使用饿汉模式。

> :bell: 饿汉单例，是线程安全的。

### 懒汉式

